<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta property="og:site_name" content="Mee42.dev"/><meta property="og:title" content="How to (not) mess up Git"/><meta property="og:type" content="website"/><meta property="og:url" content="https://mee42.dev/blog/3#how-not-to-mess-up-git"/><meta property="og:description" content="Git is more then memorizing a few commands and rm -rf * when things go south. Using git properly is important."/><html lang="en-US"></html><title>mee42.dev | How to (not) mess up Git</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/17e1c257e36565454180.css" as="style"/><link rel="stylesheet" href="/_next/static/css/17e1c257e36565454180.css"/><link rel="preload" href="/_next/static/css/26181ddc12afafa38730.css" as="style"/><link rel="stylesheet" href="/_next/static/css/26181ddc12afafa38730.css"/><link rel="preload" href="/_next/static/chunks/main-5111d87fab9b5370cc9a.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1b5fae6dde8a26be77ac.js" as="script"/><link rel="preload" href="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.385dc8404ef76b6a4b4e.js" as="script"/><link rel="preload" href="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.93fe777673a5651520d9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-93e30f94c05dd8c9a648.js" as="script"/><link rel="preload" href="/_next/static/chunks/1a2af845c0b0daf3d71ab5908136823678b656af.a06c409320be9f87330b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bid%5D-49d6cba1bd749b6a9565.js" as="script"/></head><body><div id="__next"><div><header class="header_header__2q1wF"><a href="/" class="header_mainButton__3_bcA"><code>mee42.dev</code></a><div><div class="header_withGrow__2qx96"></div><a href="/">Home</a><div class="header_withGrow__2qx96"></div><div class="header_bottomBorder__3FSRX"></div></div><div><div class="header_withGrow__2qx96"></div><a href="/projects">Projects</a><div class="header_withGrow__2qx96"></div><div class="header_bottomBorder__3FSRX"></div></div><div><div class="header_withGrow__2qx96"></div><a href="/blog">Blog</a><div class="header_withGrow__2qx96"></div><div class="header_bottomBorder__3FSRX"></div></div><div><div class="header_withGrow__2qx96"></div><a href="https://github.com/mee42/">Github</a><div class="header_withGrow__2qx96"></div><div class="header_bottomBorder__3FSRX"></div></div></header><div class="blogPost_titleBar__2wHAy"><div class="blogPost_title__2vP91">How to (not) mess up Git</div><div class="blogPost_desc__1vii7">Git is more then memorizing a few commands and rm -rf * when things go south. Using git properly is important.</div></div><div class="blogPost_content__2qtEn blogPost_post__KTait"><p>Git is hard! A lot of people I know only know a couple git commands</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>$ git add -A .
</span>$ git commit -m $message
<!-- -->$ git checkout $branch
<!-- -->$ git push origin $branch
</code></pre><p>and while this works for 90% of all work done on git, it&#x27;s woefully incompetent at the other 10%: fixing shit when it breaks.</p><p><em>Now, just to note, git rarely &quot;breaks&quot;. It&#x27;s almost always the developer doing something they shoudn&#x27;t have.</em></p><p>This document is going te be a brief summary on some major misconceptions of Git, and then some specific helpful examples that I&#x27;ve needed to use in my time working with Git, or helping other people with them.</p><h2>What branches are</h2><p>Branches are reference to commits. To rephrase that, a branch is just a pointers to a specific commit.</p><p>When you are working in git, you have this reference called HEAD, which refers to the current working commit.
You are always &quot;on&quot; a specific commit, which is reflected in the current state of the source code.
With git the was you change between commits is the <code>git checkout</code> command.</p><p>There&#x27;s also &quot;detached head&quot; state, where you do not live on a branch but instead a specific commit, named by its hash. This is unusual, but worth noting.</p><p><strong>A key point here is that branches don&#x27;t technically have multiple commits.</strong></p><p>Branches are a single commit, and each commit is some changes plus it&#x27;s parent(s).
Here&#x27;s a quick example:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> a -&gt; b -&gt; c -&gt; d     &lt;--- master
</span>      \
<!-- -->       \--&gt; e -&gt; f    &lt;--- dev
</code></pre><p><code>a</code> is the initial commit. For the purpose of this page, there is only ever one inital commit - while there can be others, merging them isn&#x27;t really done.</p><p>You might look at this and say &quot;okay, well, <code>e</code> is on the <code>dev</code> branch. And, you&#x27;d be almost correct.
While dev does encompase <code>e</code>, and <code>e</code> is &quot;on dev&quot;, the <code>e</code> commit contains exactly zero information about the <code>dev</code> branch. 
You can see that in the next step:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> a -&gt; b -&gt; c -&gt; d -----&gt; g    &lt;--- master
</span>      \                 /\
<!-- -->       \--&gt; e -&gt; f -----/
</code></pre><p>In this step, we merged dev into <code>g</code> with a merge commit.</p><p>Now what branch is <code>e</code> on? It&#x27;s actually on master - but when you commited, you commited to dev!
Doing a very basic <code>git log</code> will just show you <code>g, f, d, e, c, b, a</code>, which has no way to tell the difference between commits done on dev and commits done on master.</p><p>This could be an issue if you wanted to have broken code on dev (say commit <code>e</code> doesn&#x27;t work), and now all the sudden it&#x27;s on master! Some git loggers will properly split the commits so they visually appear on a different history path then the master branch, but they&#x27;re still 100% on the master branch without the context of dev.</p><h2>Some common Git problems</h2><h4>I made a commit to the wrong branch!</h4><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>a -&gt; b -&gt; c   &lt;--- master</span></code></pre><p>Whoops, you wanted to make the <code>c</code> commit on <code>dev</code>! This happens to me at least once a week.
The fix is easy, but you have to be careful because it involves rewriting history.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>$ git reset --soft HEAD~1</span></code></pre><p>This will reset your git repo to <code>HEAD~1</code> (meaning the commit before <code>HEAD</code>), but because it&#x27;s a <code>--soft</code> reset, it&#x27;ll keep all the changes in that commit and put them back into staging. Then you can</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>$ git checkeout -b dev
</span>$ git commit
</code></pre><h4>I made a commit to the wrong branch and pushed it!</h4><p>First, check with everyone who works on the project to make sure they haven&#x27;t touched anything yet.
If they haven&#x27;t, you can delete the <code>c</code> commit on master with a force push</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>$ git push --force origin master</span></code></pre><p>However, this is <em>not good</em> and should be avoided if possible. Branch protection rules are offered by GitHub and GitLab, use them if you need to.</p><h4>I made a commit and now there&#x27;s a merge conflict</h4></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"3","post":{"id":3,"title":"How to (not) mess up Git","desc":"Git is more then memorizing a few commands and rm -rf * when things go south. Using git properly is important.","tags":["unreleased"],"url":"how-not-to-mess-up-git","date":"2020-08-21","content":"Git is hard! A lot of people I know only know a couple git commands\n```\n$ git add -A .\n$ git commit -m $message\n$ git checkout $branch\n$ git push origin $branch\n```\nand while this works for 90% of all work done on git, it's woefully incompetent at the other 10%: fixing shit when it breaks.\n\n*Now, just to note, git rarely \"breaks\". It's almost always the developer doing something they shoudn't have.*\n\nThis document is going te be a brief summary on some major misconceptions of Git, and then some specific helpful examples that I've needed to use in my time working with Git, or helping other people with them.\n\n## What branches are\n\nBranches are reference to commits. To rephrase that, a branch is just a pointers to a specific commit.\n\nWhen you are working in git, you have this reference called HEAD, which refers to the current working commit.\nYou are always \"on\" a specific commit, which is reflected in the current state of the source code.\nWith git the was you change between commits is the `git checkout` command.\n\nThere's also \"detached head\" state, where you do not live on a branch but instead a specific commit, named by its hash. This is unusual, but worth noting.\n\n**A key point here is that branches don't technically have multiple commits.**\n\nBranches are a single commit, and each commit is some changes plus it's parent(s).\nHere's a quick example:\n```\n a -\u003e b -\u003e c -\u003e d     \u003c--- master\n      \\\n       \\--\u003e e -\u003e f    \u003c--- dev\n```\n`a` is the initial commit. For the purpose of this page, there is only ever one inital commit - while there can be others, merging them isn't really done.\n\nYou might look at this and say \"okay, well, `e` is on the `dev` branch. And, you'd be almost correct.\nWhile dev does encompase `e`, and `e` is \"on dev\", the `e` commit contains exactly zero information about the `dev` branch. \nYou can see that in the next step:\n```\n a -\u003e b -\u003e c -\u003e d -----\u003e g    \u003c--- master\n      \\                 /\\\n       \\--\u003e e -\u003e f -----/\n```\nIn this step, we merged dev into `g` with a merge commit.\n\nNow what branch is `e` on? It's actually on master - but when you commited, you commited to dev!\nDoing a very basic `git log` will just show you `g, f, d, e, c, b, a`, which has no way to tell the difference between commits done on dev and commits done on master.\n\nThis could be an issue if you wanted to have broken code on dev (say commit `e` doesn't work), and now all the sudden it's on master! Some git loggers will properly split the commits so they visually appear on a different history path then the master branch, but they're still 100% on the master branch without the context of dev.\n\n## Some common Git problems\n\n#### I made a commit to the wrong branch!\n```\na -\u003e b -\u003e c   \u003c--- master\n```\nWhoops, you wanted to make the `c` commit on `dev`! This happens to me at least once a week.\nThe fix is easy, but you have to be careful because it involves rewriting history.\n```\n$ git reset --soft HEAD~1\n```\nThis will reset your git repo to `HEAD~1` (meaning the commit before `HEAD`), but because it's a `--soft` reset, it'll keep all the changes in that commit and put them back into staging. Then you can\n```\n$ git checkeout -b dev\n$ git commit\n```\n\n#### I made a commit to the wrong branch and pushed it!\n\nFirst, check with everyone who works on the project to make sure they haven't touched anything yet.\nIf they haven't, you can delete the `c` commit on master with a force push\n```\n$ git push --force origin master\n```\nHowever, this is *not good* and should be avoided if possible. Branch protection rules are offered by GitHub and GitLab, use them if you need to.\n\n#### I made a commit and now there's a merge conflict"}},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"3"},"buildId":"JXXIyzib0wAlK97q3FhI3","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ddcc847e43635f820aed.js"></script><script src="/_next/static/chunks/main-5111d87fab9b5370cc9a.js" async=""></script><script src="/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" async=""></script><script src="/_next/static/chunks/framework.1b5fae6dde8a26be77ac.js" async=""></script><script src="/_next/static/chunks/99f422a92ff7083adb8a7d840734144fa7589f68.385dc8404ef76b6a4b4e.js" async=""></script><script src="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.93fe777673a5651520d9.js" async=""></script><script src="/_next/static/chunks/pages/_app-93e30f94c05dd8c9a648.js" async=""></script><script src="/_next/static/chunks/1a2af845c0b0daf3d71ab5908136823678b656af.a06c409320be9f87330b.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-49d6cba1bd749b6a9565.js" async=""></script><script src="/_next/static/JXXIyzib0wAlK97q3FhI3/_buildManifest.js" async=""></script><script src="/_next/static/JXXIyzib0wAlK97q3FhI3/_ssgManifest.js" async=""></script></body></html>